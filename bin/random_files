#! /usr/bin/env ruby

$: << File.expand_path('../../lib', __FILE__)

if ARGV.count < 1 or ARGV.first !~ /^\d+$/
  puts "USAGE: #{__FILE__} <number-of-files> [dir1, [dir2, [...]]]"
  exit(1)
end

file_count_limit = ARGV.shift.to_i

if ARGV.count >= 1
  files = ARGV.map { |arg| Dir[arg] }.inject(:+)
else
  files = Dir['**/*']
end

def pop_random(list)
  list.delete_at(rand(list.size))
end

selected_files = []

file_count_limit.times do
  if files.empty?
    break
  else
    selected_files << pop_random(files)
  end
end

puts selected_files
